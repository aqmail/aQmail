#!/bin/sh
#********************************************************************************
# Create compile, load, makelib

CFLAGS=`cat conf-qlibs | grep ^CFLAGS 2>/dev/null | cut -d= -f2`
#echo $CFLAGS > cflags.tmp

#DEST=`cat conf-qlibs | grep ^INSTDIR 2>/dev/null | cut -d= -f2`
#[ $DEST == . ] && DEST=""
#echo "$DEST" > dest.tmp
#FILES=`cat conf-qlibs | grep ^FILES 2>/dev/null | cut -d= -f2`
#echo "$FILES" > files.tmp



echo -n "Checking for compile ... "

#CC=`head -1 conf-qlibs`"$CCOPTS"
CC="cc"  # $CFLAGS"  # -Iinc"  # -Ihdrs"
#(cat warn-auto.sh ; 
( echo '#!/bin/sh' ;
  echo exec "$CC" "$CFLAGS" -c '${1+"$@"}' ) > compile
chmod 755 compile
echo "created!"

#exit

## load: auto-ld
#echo -n "Checking for loader ... "
#LD=`head -1 conf-ld`"$LDOPTS"
#(cat warn-auto.sh ; echo 'main="$1"; shift' ; \
#  echo exec "$LD" '-o "$main" "$main".o ${1+"$@"}') > load
#chmod 755 load
#echo "created!"

# makelib
echo -n "Checking for makelib ... "
#(cat warn-auto.sh ; \
( echo '#!/bin/sh' ;
  echo "" ;
  echo 'main="$1"; shift' ; \
  echo 'rm -f "$main"' ; \
  echo 'ar cr "$main" ${1+"$@"}' ; \
  echo 'ranlib "$main"') > makelib
chmod 755 makelib
echo "created!"
